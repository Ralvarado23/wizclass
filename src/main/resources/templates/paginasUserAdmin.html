<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>WizClass | Páginas de [[${user.username}]]</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="/css/mdb.min.css" rel="stylesheet">
  <!-- Css propio -->
  <link href="/css/style.css" rel="stylesheet">
  <link rel="shortcut icon" type="image/png" href="/img/favicon.ico"/>
</head>
<body>
	
  <div class="loader"><div class="spinner-grow text-default" role="status" style="width: 3rem; height: 3rem"><span class="sr-only">Loading...</span></div></div>

  <div class="wrapper">
    <!-- Content-->
    <!--Header -->
    <div th:replace="fragments/layout :: header"></div>
    <!--/.Header -->
    
	<div class='alert alert-success' role="alert" th:if="${msgDeletedPage!=null}" th:text="${msgDeletedPage}"></div>

    <main>
      <div class="container" style="margin-top: 40px; margin-bottom: 40px;">
        <h1 class="tituloPagina">Páginas de [[${user.username}]]</h1>
        
        <th:block th:if="${#lists.size(user.paginas)!=0}">
	        <div class='table-responsive'>
	          <table class="table table-striped table-hover text-center" style="margin: 20px 0;">
	            <thead class="thead-light">
	              <tr>
	                  <th scope="col">#</th>
	                  <th scope="col">Nombre</th>
	                  <th scope="col">Última modificación</th>
	                  <th scope="col">Acciones</th>
	              </tr>
	            </thead>
	            <tbody>
		            <th:block th:each="pagina,iterator : ${user.paginas}">
		              <tr>
		                <th scope="row" th:text="${iterator.index+1}"></th>
		                <td th:text="${pagina.titulo}"></td>
		                <td th:text="${pagina.fechaModificacion}"></td>
		                
		                <td class="td-btn"><a th:href="@{/page/{id}/index(id=${pagina.id})}" th:target="_blank" class="btn btn-default btn-sm btn-tbl text-white"><i class="far fa-eye mr-1"></i> Ver</a></td>
						<td class="td-btn"><a th:href="@{/app/updatePage/{id}(id=${pagina.id})}" th:target="_blank" class="btn btn-default btn-sm btn-tbl text-white"><i class="far fa-edit mr-1"></i> Editar</a></td>
			    		<td class="td-btn"><a th:href="@{/page/deleteAdmin/{id}(id=${pagina.id})}" class="btn btn-default btn-sm btn-tbl text-white"><i class="far fa-trash-alt mr-1"></i> Eliminar</a></td>
		                
		              </tr>
	              </th:block>
	            </tbody>
	          </table>
	        </div>
        </th:block>
        
        <th:block th:if="${#lists.size(user.paginas)==0}">
        	<div style="margin: 30px 0 10px 0;">
				<h4 style="font-weight: 400;">Este usuario todavía no ha creado ninguna página.</h4>
			</div>
        </th:block>
        
        <form method="get" th:action="@{/adminUsers}">
        	<button type="submit" class="btn btn-default btn-sm-radius" style="margin: 20px 0;"><i class="fas fa-backward mr-1"></i> Volver</button>
        </form>
        
      </div>
    </main>
    <!--Footer -->
    <div th:replace="fragments/layout :: footer"></div>
  	<!--/.Footer -->
  <!-- /Content-->
  </div>

  <!-- SCRIPTS -->
  <!-- JQuery -->
  <script type="text/javascript" src="/js/jquery-3.3.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="/js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- JavaScript propio -->
  <script type="text/javascript" src="/js/javascript.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="/js/mdb.min.js"></script>
</body>
</html>