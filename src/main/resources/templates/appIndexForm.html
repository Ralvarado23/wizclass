<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>WizClass | App | Editar Página | Inicio</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="/css/mdb.min.css" rel="stylesheet">
  <!-- Css propio -->
  <link href="/css/style.css" rel="stylesheet">
  <link rel="shortcut icon" type="image/png" href="/img/favicon.ico"/>
</head>
<body class="patternBackground text-left">
	
  <div class="loader"><div class="spinner-grow text-default" role="status" style="width: 3rem; height: 3rem"><span class="sr-only">Loading...</span></div></div>

  <div class="wrapper">
    <!-- Content-->
    <!--Header -->
    <div th:replace="fragments/layoutAppCreate :: headerApp"></div>
    <!--/.Header -->
    
    <div class='alert alert-success' role="alert" th:if="${msgNoticiaCreada!=null}" th:text="${msgNoticiaCreada}"></div>
    <div class='alert alert-success' role="alert" th:if="${msgNoticiaActualizada!=null}" th:text="${msgNoticiaActualizada}"></div>
    
    <div class='alert alert-danger' role="alert" th:if="${messageError!=null}" th:text="${messageError}"></div>
    
    <div class='alert alert-success' role="alert" th:if="${msgDeletedNews!=null}" th:text="${msgDeletedNews}"></div>
    
    <main>
      <div class="appFrame">
        
        <!--Header -->
	    <div th:replace="fragments/layoutAppCreate :: headerPage"></div>
	    <!--/.Header -->

        <!--Info -->
        <div class="container" style="margin-top: 40px;">
          <h1 class="tituloPrincipalApp mb-3" th:style="'border-color: ' + ${pagina.paleta.colorBaseHex}"><span th:text="${pagina.nombre}"></span></h1>
          
          <!--Carousel Wrapper-->
          <div id="carousel-index" class="carousel slide carousel-fade mt-4" data-ride="carousel">
            <!--Indicators-->
            <ol class="carousel-indicators">
              <li data-target="#carousel-index" data-slide-to="0" class="active"></li>
              <li data-target="#carousel-index" data-slide-to="1"></li>
              <li data-target="#carousel-index" data-slide-to="2"></li>
            </ol>
            <!--/.Indicators-->
            <!--Slides-->
            <div class="carousel-inner" role="listbox">
              <div class="carousel-item active">
                <div class="view">
                  <img class="d-block w-100" style="max-height: 350px;" src="/img/appBanner1.jpg"
                    alt="First slide">
                  <div class="mask rgba-black-slight"></div>
                </div>
              </div>
              <div class="carousel-item">
                <!--Mask color-->
                <div class="view">
                  <img class="d-block w-100" style="max-height: 350px;" src="/img/appBanner2.jpg"
                    alt="Second slide">
                  <div class="mask rgba-black-slight"></div>
                </div>
              </div>
              <div class="carousel-item">
                <!--Mask color-->
                <div class="view">
                  <img class="d-block w-100" style="max-height: 350px;" src="/img/appBanner3.png"
                    alt="Third slide">
                  <div class="mask rgba-black-slight"></div>
                </div>
              </div>
            </div>
            <!--/.Slides-->
            <!--Controls-->
            <a class="carousel-control-prev" href="#carousel-index" role="button" data-slide="prev">
              <span class="carousel-control-prev-icon" aria-hidden="true"></span>
              <span class="sr-only">Anterior</span>
            </a>
            <a class="carousel-control-next" href="#carousel-index" role="button" data-slide="next">
              <span class="carousel-control-next-icon" aria-hidden="true"></span>
              <span class="sr-only">Posterior</span>
            </a>
            <!--/.Controls-->
          </div>
          <!--/.Carousel Wrapper-->
          
          <h2 class="titleIndex mb-0 mt-4 mt-lg-5">Últimas noticias:</h2>
          <a href="" class="text-default" data-toggle="modal" data-target="#modalCreateForm">
            <div class="container-fluid">
              <div class="row">
                  <div class="col-12 mt-lg-4 mt-3 pl-0 pr-0">
                    <div class="card">
                      <div th:class="'card-header text-right ' + ${pagina.paleta.colorBaseCss}">
                        <small class="text-white" th:text="${#dates.format(#dates.createNow(), 'dd/MM/yyyy')}"></small>
                      </div>
                      <div class="card-horizontal">
                        <div class="img-square-wrapper">
                          <img class="imgCardIndApp" src="/img/defaultNews.jpg" alt="Card image cap">
                        </div>
                        <div class="card-body">
                          <h4 class="card-title font-weight-bold">Añadir noticia</h4>
                          <p class="card-text">Haz clik aquí para añadir nuevo contenido a tu sitio.</p>
                        </div>
                      </div>   
                    </div>
                  </div>
              </div>
            </div>
          </a>
          
          <th:block th:each="noticia,iterator : ${noticiasIndex}">
	          <div class="container-fluid">
	            <div class="row">
	                <div class="col-12 mt-lg-4 mt-3 pl-0 pr-0">
	                  <div class="card">
	                    <div th:class="'card-header text-right ' + ${pagina.paleta.colorBaseCss}">
	                      <small class="text-white"><span th:text="${noticia.fechaPublicacion}"></span></small>
	                    </div>
	                    <div class="card-horizontal">
	                      <div class="img-square-wrapper">
	                        <img class="imgCardIndApp" th:if="${#strings.length(noticia.imagen)}" th:src="@{'/uploads/' + ${noticia.imagen}}" alt="Imagen noticia">
	                      </div>
	                      <div class="card-body">
		                    <h4 class="card-title" id="title-modal" th:text="${noticia.titulo}"></h4>
		                    <p class="card-text" id="text-modal" th:text="${noticia.cuerpo}"></p>
		                  </div>
	                      <div class="text-center mb-3 clear-both">
	                        <a th:href="@{/app/deleteNews/{id}(id=${noticia.id})}" class="btn btn-dark btn-sm-radius d-block d-sm-inline-block mt-sm-3">Eliminar noticia</a>
	                      	<a href="" data-toggle="modal" data-target="#modalUpdateForm" th:attr="data-target='#modalUpdateForm' + ${noticia.id}" class="btn btn-dark btn-sm-radius d-block d-sm-inline-block mt-3 mt-sm-3">Actualizar noticia</a>
	                      </div>
	                    </div>   
	                  </div>
	                </div>
	            </div>
	          </div>
	          
	          <div class="modal fade" th:id="'modalUpdateForm' + ${noticia.id}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header text-center">
                  <h4 class="modal-title w-100 font-weight-bold">Actualizar noticia</h4>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <form enctype="multipart/form-data" th:action="@{/app/updateNews/{idNews}(idNews=${noticia.id})}" method="post" th:object="${noticia}">
	                <div class="modal-body mx-3">
	                  <div class="md-form mb-3">
	                    <i class="fas fa-tag prefix grey-text"></i>
	                    <input type="text" id="formTitle" class="form-control" name="titulo" th:value="${noticia.titulo}">
	                    <label for="formTitle">Título</label>
	                  </div>
	
	                  <div class="md-form">
	                    <i class="fas fa-comment-alt prefix grey-text"></i>
	                    <textarea type="text" id="formText" class="md-textarea form-control" rows="4" name="cuerpo" th:text="${noticia.cuerpo}"></textarea>
	                    <label for="formText">Cuerpo</label>
	                  </div>
	
	                  <p>Añade una imagen (opcional). Recomendado: 300x200</p>
	
	                  <div class="md-form mb-3">
	                    <i class="fas fa-file-image prefix grey-text"></i>
	                    <input type="file" id="formImage" name="file">
	                  </div>
	                </div>
	                <div class="modal-footer d-flex justify-content-center">
	                  <button type="submit" class="btn btn-dark btn-sm-radius">Actualizar</button>
	                </div>
                </form>
              </div>
            </div>
          </div>
	          
          </th:block>
          
          <div class="container-fluid" th:if="${#lists.size(pagina.noticias)<3}">
            <div class="row">
                <div class="col-12 mt-lg-4 mt-3 pl-0 pr-0">
                  <div class="card">
                    <div th:class="'card-header text-right ' + ${pagina.paleta.colorBaseCss}">
                      <small class="text-white"><span th:text="${pagina.fechaPublicacion}"></span></small>
                    </div>
                    <div class="card-horizontal">
                      <div class="img-square-wrapper">
                        <img class="imgCardIndApp" src="/img/newsExample1.jpg" alt="Imagen noticia">
                      </div>
                      <div class="card-body">
                     	<h4 class="card-title">Matriculas en [[${pagina.nombre}]] para el curso 19/20</h4>
                      	<p class="card-text">De cara al próximo curso escolar 2019 - 2020, en [[${pagina.nombre}]] podrás matricularte en las siguientes etapas escolares:<br>
	                      <span style="display: block; margin: 10px 0;">
	                      	<th:block th:each="ensenanza,iterator : ${ensenanzasOrden}">
	                      		<span>- <span class="ensenanzaFormatText">[[${ensenanza.ensenanza}]]</span></span><br>
	                      	</th:block>
	                      </span>
                      	Ponte en contacto con nosotros a través de la web o acude al centro para más información.
                      	</p>
                      </div>
                      <div class="text-center mb-3 clear-both">
                        <span data-toggle="tooltip" title="No se puede eliminar las noticias iniciales"><button class="btn btn-dark btn-sm-radius d-block d-sm-inline-block mt-sm-3 fill-available" disabled>Eliminar noticia</button></span>
                      	<span data-toggle="tooltip" title="No se puede editar las noticias iniciales"><button class="btn btn-dark btn-sm-radius d-block d-sm-inline-block mt-3 mt-sm-3 fill-available" disabled>Actualizar noticia</button></span>
                      </div>
                    </div>   
                  </div>
                </div>
            </div>
          </div>

          <div class="container-fluid" th:if="${#lists.size(pagina.noticias)<2}">
            <div class="row">
                <div class="col-12 mt-lg-4 mt-3 pl-0 pr-0">
                  <div class="card">
                    <div th:class="'card-header text-right ' + ${pagina.paleta.colorBaseCss}">
                      <small class="text-white"><span th:text="${pagina.fechaPublicacion}"></span></small>
                    </div>
                    <div class="card-horizontal">
                      <div class="img-square-wrapper">
                        <img class="imgCardIndApp" src="/img/newsExample2.jpg" alt="Imagen noticia">
                      </div>
                      <div class="card-body">
	                    <h4 class="card-title">Bienvenido a la web de [[${pagina.nombre}]]</h4>
	                    <p class="card-text">Desde [[${pagina.nombre}]] le damos la bienvenida a nuestra nueva página web, en la que podrá conocer todos los servicios de nuestro centro y acceder a ellos de una forma fácil y rápida. El principal objetivo de este canal de comunicación es difundir la identidad de nuestro centro, comunicar lo que somos y lo que hacemos, así como los valores que tratamos de fomentar en nuestro día a día. Esperamos que todos nuestros alumnos puedan disfrutar de esta nueva vía de comunicación que nos permite proporcionar un mejor servicio, ahorrándole tiempo y resolviendo sus dudas de manera más directa. Esperamos, también, poder cumplir con sus expectativas de calidad y satisfacción, ya que es nuestra verdadera filosofía de trabajo ¡Bienvenido!</p>
	                  </div>
                      <div class="text-center mb-3 clear-both">
                        <span data-toggle="tooltip" title="No se puede eliminar las noticias iniciales"><button class="btn btn-dark btn-sm-radius d-block d-sm-inline-block mt-sm-3 fill-available" disabled>Eliminar noticia</button></span>
                      	<span data-toggle="tooltip" title="No se puede editar las noticias iniciales"><button class="btn btn-dark btn-sm-radius d-block d-sm-inline-block mt-3 mt-sm-3 fill-available" disabled>Actualizar noticia</button></span>
                      </div>
                    </div>   
                  </div>
                </div>
            </div>
          </div>

          <div class="modal fade" id="modalCreateForm" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header text-center">
                  <h4 class="modal-title w-100 font-weight-bold">Añadir noticia</h4>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <form enctype="multipart/form-data" th:action="@{/app/addNews/{idPage}(idPage=${pagina.id})}" method="post" th:object="${noticiaNew}">
	                <div class="modal-body mx-3">
	                  <div class="md-form mb-3">
	                    <i class="fas fa-tag prefix grey-text"></i>
	                    <input type="text" id="formTitle" class="form-control" name="titulo" th:field="*{titulo}">
	                    <label for="formTitle">Título</label>
	                  </div>
	
	                  <div class="md-form">
	                    <i class="fas fa-comment-alt prefix grey-text"></i>
	                    <textarea type="text" id="formText" class="md-textarea form-control" rows="4" name="cuerpo" th:field="*{cuerpo}"></textarea>
	                    <label for="formText">Cuerpo</label>
	                  </div>
	
	                  <p>Añade una imagen (opcional). Recomendado: 300x200</p>
	
	                  <div class="md-form mb-3">
	                    <i class="fas fa-file-image prefix grey-text"></i>
	                    <input type="file" id="formImage" name="file">
	                  </div>
	                </div>
	                <div class="modal-footer d-flex justify-content-center">
	                  <button type="submit" class="btn btn-dark btn-sm-radius">Añadir</button>
	                </div>
                </form>
              </div>
            </div>
          </div>
          
        </div>
        <!--/.Info -->

      <!--FooterPage -->
	  <div th:replace="fragments/layoutAppCreate :: footerPage"></div>
      <!--/.FooterPage -->

    </div>
    </main>
  
	    <!--Footer -->
	    <div th:replace="fragments/layoutAppCreate :: footerApp"></div>
	  	<!--/.Footer -->
    <!-- /Content-->
  </div>

  <!-- SCRIPTS -->  
  <!-- JQuery -->
  <script type="text/javascript" src="/js/jquery-3.3.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="/js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="/js/bootstrap.min.js"></script>
  <!-- JavaScript propio -->
  <script type="text/javascript" src="/js/javascript.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="/js/mdb.min.js"></script>
  
  <script type="text/javascript">
  //Tooltips Initialization
  $(function () {
  	$('[data-toggle="tooltip"]').tooltip()
  });
  </script>
  
</body>
</html>